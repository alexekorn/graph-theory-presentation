<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Minnebar graph algorithms</title>
    <script src="src/Graph.js"></script>
    <script src="src/Node.js"></script>
    <script src="src/Edge.js"></script>
    <script src="src/GraphBuilder.js"></script>
    <script src="src/Dijkstra.js"></script>
    <script src="src/GraphRenderer.js"></script>
    <style>
        .node {
            fill:lightskyblue;
            stroke-width:2;
            stroke:darkblue;
        }
        .line {
            stroke: darkblue;
        }
        .u {
            fill: forestgreen;
        }
        .v {
            fill: orange;
        }
        .nodeDist {
            fill: darkmagenta;
        }
        .distConsider {
            font-weight: bold;
        }
        .visited {
            fill: dimgray;
        }
    </style>
</head>
<body>
<div id="graphViz">
    <svg height="500" width="1000"><g id="graphSvg"></g></svg>
</div>
<button onclick="nextStep = true;">Next step</button>
<script>
    let nextStep = false;

    let graph = (new GraphBuilder()).buildGraph();

    let dijkstra = new Dijkstra(graph);

    let minneapolis = graph.getNodes().get('Minneapolis');

    /*
    dijkstra.run(minneapolis);
    console.log(dijkstra.summarizeResults());
     */

    let graphRenderer = new GraphRenderer(graph);
    graphRenderer.render(graph, {
        'Minneapolis': [200, 200],
        'Rochester': [200, 300],
        'Madison': [500, 300],
        'Des Moines': [200, 400],
        'Chicago': [800, 400],
        'Milwaukee': [800, 300],
        'St Cloud': [100, 100],
        'Fargo': [25, 35],
        'Sioux Falls': [25, 300],
    });

    async function run() {
        await dijkstra.runVisualize(minneapolis, graphRenderer.getUpdateFn());
        console.log(dijkstra.summarizeResults());
    }
    run();

</script>
</body>
</html>